{
	"info": {
		"_postman_id": "pos-ecommerce-api-collection",
		"name": "POS Ecommerce API",
		"description": "Colección de Postman para probar los endpoints de la API de POS Ecommerce.\n\n## Credenciales de Super Admin\n- Email: admin@pos-ecommerce.com\n- Password: SuperAdmin123!\n\n## Endpoints disponibles\n\n### Health Check\n- GET /health - Verificar estado del servidor\n\n### Autenticación\n- POST /api/v1/auth/register - Registrar nuevo usuario\n- POST /api/v1/auth/login - Iniciar sesión\n- POST /api/v1/auth/refresh - Refrescar token de acceso\n\n### Stores (requiere autenticación)\n- POST /api/v1/stores - Crear tienda (super_admin)\n- GET /api/v1/stores - Listar tiendas\n- GET /api/v1/stores/:id - Obtener detalle de tienda\n- PUT /api/v1/stores/:id - Actualizar tienda\n- POST /api/v1/stores/:id/activate - Activar tienda (super_admin)\n- POST /api/v1/stores/:id/deactivate - Desactivar tienda (super_admin)\n- GET /api/v1/stores/:id/inventory - Obtener inventario de tienda (inventory:read)\n- GET /api/v1/stores/:id/low-stock - Obtener alertas de stock bajo (inventory:read)\n\n### Terminals (requiere autenticación)\n- POST /api/v1/stores/:store_id/terminals - Crear terminal (super_admin)\n- GET /api/v1/stores/:store_id/terminals - Listar terminales de tienda\n- GET /api/v1/terminals/:id - Obtener detalle de terminal\n- PUT /api/v1/terminals/:id - Actualizar terminal\n- POST /api/v1/terminals/:id/activate - Activar terminal\n- POST /api/v1/terminals/:id/deactivate - Desactivar terminal\n\n### CAI Management (requiere autenticación)\n- POST /api/v1/terminals/:id/cai - Asignar CAI (super_admin)\n- GET /api/v1/terminals/:id/cai/status - Estado del CAI\n- POST /api/v1/terminals/:id/cai/next-number - Obtener siguiente número de factura\n- GET /api/v1/terminals/:id/cai/history - Historial de CAI\n\n### Products (requiere autenticación)\n- POST /api/v1/products - Crear producto (products:create)\n- GET /api/v1/products - Listar productos con paginación\n- GET /api/v1/products/:id - Obtener detalle de producto\n- PUT /api/v1/products/:id - Actualizar producto (products:update)\n- DELETE /api/v1/products/:id - Eliminar producto (products:delete)\n- POST /api/v1/products/:id/variants - Crear variante (products:create)\n- GET /api/v1/products/:id/variants - Listar variantes\n- GET /api/v1/products/:id/variants/:variant_id - Obtener variante\n- PUT /api/v1/products/:id/variants/:variant_id - Actualizar variante (products:update)\n- DELETE /api/v1/products/:id/variants/:variant_id - Eliminar variante (products:delete)\n- GET /api/v1/products/:id/recipe - Obtener receta activa del producto\n- GET /api/v1/products/:id/stock - Obtener stock del producto\n\n### Recipes (requiere autenticación)\n- POST /api/v1/recipes - Crear receta (recipes:create)\n- GET /api/v1/recipes - Listar recetas con paginación\n- GET /api/v1/recipes/:id - Obtener detalle de receta\n- PUT /api/v1/recipes/:id - Actualizar receta (recipes:update)\n- POST /api/v1/recipes/:id/calculate-cost - Calcular costo de receta\n\n### Inventory (requiere autenticación)\n- POST /api/v1/inventory/stock - Inicializar stock (inventory:write)\n- POST /api/v1/inventory/stock/bulk - Inicializar stock masivo (inventory:write)\n- GET /api/v1/inventory/stock - Listar stock con paginación\n- GET /api/v1/inventory/stock/:stock_id - Obtener detalle de stock\n- PUT /api/v1/inventory/stock/:stock_id/levels - Actualizar niveles de stock (inventory:write)\n- POST /api/v1/inventory/reservations - Crear reserva\n- GET /api/v1/inventory/reservations - Listar reservas\n- PUT /api/v1/inventory/reservations/:id/confirm - Confirmar reserva\n- PUT /api/v1/inventory/reservations/:id/cancel - Cancelar reserva\n- POST /api/v1/inventory/reservations/expire - Expirar reservas vencidas\n\n### Adjustments (requiere autenticación)\n- POST /api/v1/inventory/adjustments - Crear ajuste de stock (inventory:adjustments:create)\n- GET /api/v1/inventory/adjustments - Listar ajustes con paginación (inventory:adjustments:read)\n- GET /api/v1/inventory/adjustments/:id - Obtener detalle de ajuste (inventory:adjustments:read)\n- PUT /api/v1/inventory/adjustments/:id/submit - Enviar ajuste para aprobación (inventory:adjustments:submit)\n- PUT /api/v1/inventory/adjustments/:id/approve - Aprobar ajuste (inventory:adjustments:approve)\n- PUT /api/v1/inventory/adjustments/:id/reject - Rechazar ajuste (inventory:adjustments:approve)\n- POST /api/v1/inventory/adjustments/:id/apply - Aplicar ajuste al stock (inventory:adjustments:apply)\n\n### Vendors (requiere autenticación)\n- POST /api/v1/vendors - Crear proveedor (vendors:create)\n- GET /api/v1/vendors - Listar proveedores con paginación (vendors:read)\n- GET /api/v1/vendors/:id - Obtener detalle de proveedor (vendors:read)\n- PUT /api/v1/vendors/:id - Actualizar proveedor (vendors:update)\n- PUT /api/v1/vendors/:id/activate - Activar proveedor (vendors:update)\n- PUT /api/v1/vendors/:id/deactivate - Desactivar proveedor (vendors:update)\n\n### Purchase Orders (requiere autenticación)\n- POST /api/v1/purchase-orders - Crear orden de compra (purchase_orders:create)\n- GET /api/v1/purchase-orders - Listar órdenes de compra (purchase_orders:read)\n- GET /api/v1/purchase-orders/:id - Obtener detalle de orden (purchase_orders:read)\n- PUT /api/v1/purchase-orders/:id/submit - Enviar para aprobación (purchase_orders:submit)\n- PUT /api/v1/purchase-orders/:id/approve - Aprobar orden (purchase_orders:approve)\n- PUT /api/v1/purchase-orders/:id/reject - Rechazar orden (purchase_orders:approve)\n- PUT /api/v1/purchase-orders/:id/cancel - Cancelar orden (purchase_orders:cancel)\n- PUT /api/v1/purchase-orders/:id/close - Cerrar orden (purchase_orders:close)\n\n### Goods Receipts (requiere autenticación)\n- POST /api/v1/goods-receipts - Crear recepción de mercancía (goods_receipts:create)\n- GET /api/v1/goods-receipts - Listar recepciones (goods_receipts:read)\n- GET /api/v1/goods-receipts/:id - Obtener detalle de recepción (goods_receipts:read)\n- PUT /api/v1/goods-receipts/:id/confirm - Confirmar recepción (goods_receipts:confirm)\n- PUT /api/v1/goods-receipts/:id/cancel - Cancelar recepción (goods_receipts:cancel)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000",
			"type": "string"
		},
		{
			"key": "access_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "refresh_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "store_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "terminal_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "product_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "variant_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "recipe_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "stock_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "reservation_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "adjustment_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "vendor_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "purchase_order_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "goods_receipt_id",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "Health",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": ["{{base_url}}"],
							"path": ["health"]
						},
						"description": "Verifica que el servidor esté funcionando correctamente."
					},
					"response": []
				}
			],
			"description": "Endpoints de monitoreo y estado del servidor"
		},
		{
			"name": "Auth",
			"item": [
				{
					"name": "Register User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('registered_user_id', jsonData.user_id);",
									"    pm.test('User registered successfully', function() {",
									"        pm.expect(jsonData.user_id).to.not.be.empty;",
									"        pm.expect(jsonData.email).to.not.be.empty;",
									"        pm.expect(jsonData.username).to.not.be.empty;",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"usuario@ejemplo.com\",\n    \"password\": \"Password123!\",\n    \"first_name\": \"Juan\",\n    \"last_name\": \"Pérez\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/register",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "auth", "register"]
						},
						"description": "Registra un nuevo usuario de ecommerce (cliente).\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| email | string | Sí | Email válido del usuario |\n| password | string | Sí | Contraseña (mínimo 8 caracteres) |\n| first_name | string | Sí | Nombre del usuario |\n| last_name | string | Sí | Apellido del usuario |\n\n## Respuestas\n\n- **201 Created**: Usuario registrado exitosamente\n- **400 Bad Request**: Error de validación\n- **409 Conflict**: Email ya registrado"
					},
					"response": []
				},
				{
					"name": "Login (Super Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('access_token', jsonData.access_token);",
									"    pm.collectionVariables.set('refresh_token', jsonData.refresh_token);",
									"    pm.test('Login successful', function() {",
									"        pm.expect(jsonData.access_token).to.not.be.empty;",
									"        pm.expect(jsonData.refresh_token).to.not.be.empty;",
									"        pm.expect(jsonData.token_type).to.equal('Bearer');",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"identifier\": \"admin@pos-ecommerce.com\",\n    \"password\": \"SuperAdmin123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/login",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "auth", "login"]
						},
						"description": "Inicia sesión con el usuario super_admin.\n\n## Credenciales\n- Email: admin@pos-ecommerce.com\n- Password: SuperAdmin123!"
					},
					"response": []
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('access_token', jsonData.access_token);",
									"    pm.collectionVariables.set('refresh_token', jsonData.refresh_token);",
									"    pm.test('Login successful', function() {",
									"        pm.expect(jsonData.access_token).to.not.be.empty;",
									"        pm.expect(jsonData.refresh_token).to.not.be.empty;",
									"        pm.expect(jsonData.token_type).to.equal('Bearer');",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"identifier\": \"usuario@ejemplo.com\",\n    \"password\": \"Password123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/login",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "auth", "login"]
						},
						"description": "Inicia sesión con email o username y contraseña."
					},
					"response": []
				},
				{
					"name": "Refresh Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('access_token', jsonData.access_token);",
									"    pm.test('Token refreshed successfully', function() {",
									"        pm.expect(jsonData.access_token).to.not.be.empty;",
									"        pm.expect(jsonData.token_type).to.equal('Bearer');",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"refresh_token\": \"{{refresh_token}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/refresh",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "auth", "refresh"]
						},
						"description": "Refresca el access token usando un refresh token válido."
					},
					"response": []
				}
			],
			"description": "Endpoints de autenticación de usuarios"
		},
		{
			"name": "Stores",
			"item": [
				{
					"name": "Create Store",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('store_id', jsonData.id);",
									"    pm.test('Store created successfully', function() {",
									"        pm.expect(jsonData.id).to.not.be.empty;",
									"        pm.expect(jsonData.name).to.not.be.empty;",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Tienda Nueva\",\n    \"address\": \"Calle Principal #123, Ciudad\",\n    \"is_ecommerce\": false\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/stores",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "stores"]
						},
						"description": "Crea una nueva tienda. Requiere rol super_admin.\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| name | string | Sí | Nombre de la tienda |\n| address | string | Sí | Dirección de la tienda |\n| is_ecommerce | boolean | Sí | Si es tienda de e-commerce |"
					},
					"response": []
				},
				{
					"name": "List Stores",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/stores?page=1&page_size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "stores"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "20"
								},
								{
									"key": "is_active",
									"value": "true",
									"disabled": true
								},
								{
									"key": "is_ecommerce",
									"value": "false",
									"disabled": true
								}
							]
						},
						"description": "Lista tiendas con paginación y filtros opcionales.\n\n## Query Parameters\n\n| Parámetro | Tipo | Descripción |\n|-----------|------|-------------|\n| page | number | Número de página (default: 1) |\n| page_size | number | Items por página (default: 20, max: 100) |\n| is_active | boolean | Filtrar por estado activo |\n| is_ecommerce | boolean | Filtrar por tipo e-commerce |"
					},
					"response": []
				},
				{
					"name": "Get Store",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/stores/{{store_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "stores", "{{store_id}}"]
						},
						"description": "Obtiene el detalle de una tienda incluyendo el conteo de terminales activas."
					},
					"response": []
				},
				{
					"name": "Update Store",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Tienda Actualizada\",\n    \"address\": \"Nueva Dirección #456\",\n    \"is_ecommerce\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/stores/{{store_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "stores", "{{store_id}}"]
						},
						"description": "Actualiza los datos de una tienda. Todos los campos son opcionales."
					},
					"response": []
				},
				{
					"name": "Activate Store",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/stores/{{store_id}}/activate",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "stores", "{{store_id}}", "activate"]
						},
						"description": "Activa una tienda. Requiere rol super_admin.\n\nNota: Reactivar una tienda NO reactiva automáticamente sus terminales."
					},
					"response": []
				},
				{
					"name": "Deactivate Store",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/stores/{{store_id}}/deactivate",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "stores", "{{store_id}}", "deactivate"]
						},
						"description": "Desactiva una tienda. Requiere rol super_admin.\n\nCuando se desactiva una tienda, todas sus terminales también se desactivan."
					},
					"response": []
				},
				{
					"name": "Get Store Inventory",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/stores/{{store_id}}/inventory",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "stores", "{{store_id}}", "inventory"]
						},
						"description": "Obtiene todo el inventario de una tienda específica. Requiere permiso inventory:read.\n\n## Path Parameters\n\n- `store_id`: UUID de la tienda\n\n## Respuestas\n\n- **200 OK**: Lista de registros de stock de la tienda\n- **401 Unauthorized**: Token inválido o faltante\n- **403 Forbidden**: Usuario sin permiso inventory:read"
					},
					"response": []
				},
				{
					"name": "Get Low Stock Alerts",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/stores/{{store_id}}/low-stock",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "stores", "{{store_id}}", "low-stock"]
						},
						"description": "Obtiene todos los productos con stock bajo para una tienda específica. Útil para generar alertas de reorden y notificaciones. Requiere permiso inventory:read.\n\n## Path Parameters\n\n- `store_id`: UUID de la tienda\n\n## Respuestas\n\n- **200 OK**: Lista de registros de stock con niveles bajos (quantity <= min_stock_level)\n- **401 Unauthorized**: Token inválido o faltante\n- **403 Forbidden**: Usuario sin permiso inventory:read\n\n## Response Fields\n\n| Campo | Tipo | Descripción |\n|-------|------|-------------|\n| id | uuid | ID del registro de stock |\n| store_id | uuid | ID de la tienda |\n| product_id | uuid | ID del producto |\n| variant_id | uuid | ID de la variante (si aplica) |\n| quantity | decimal | Cantidad actual |\n| min_stock_level | decimal | Nivel mínimo configurado |\n| max_stock_level | decimal | Nivel máximo configurado |"
					},
					"response": []
				}
			],
			"description": "Endpoints de gestión de tiendas. Requieren autenticación."
		},
		{
			"name": "Terminals",
			"item": [
				{
					"name": "Create Terminal",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('terminal_id', jsonData.id);",
									"    pm.test('Terminal created successfully', function() {",
									"        pm.expect(jsonData.id).to.not.be.empty;",
									"        pm.expect(jsonData.code).to.not.be.empty;",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"code\": \"TERM-001\",\n    \"name\": \"Terminal Principal\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/stores/{{store_id}}/terminals",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "stores", "{{store_id}}", "terminals"]
						},
						"description": "Crea una nueva terminal para una tienda. Requiere rol super_admin.\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| code | string | Sí | Código único de la terminal |\n| name | string | Sí | Nombre de la terminal |"
					},
					"response": []
				},
				{
					"name": "List Terminals",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/stores/{{store_id}}/terminals?page=1&page_size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "stores", "{{store_id}}", "terminals"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "20"
								},
								{
									"key": "is_active",
									"value": "true",
									"disabled": true
								}
							]
						},
						"description": "Lista terminales de una tienda con paginación y estado de CAI."
					},
					"response": []
				},
				{
					"name": "Get Terminal",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/terminals/{{terminal_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "terminals", "{{terminal_id}}"]
						},
						"description": "Obtiene el detalle de una terminal incluyendo historial completo de CAI."
					},
					"response": []
				},
				{
					"name": "Update Terminal",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Terminal Actualizada\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/terminals/{{terminal_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "terminals", "{{terminal_id}}"]
						},
						"description": "Actualiza los datos de una terminal."
					},
					"response": []
				},
				{
					"name": "Activate Terminal",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/terminals/{{terminal_id}}/activate",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "terminals", "{{terminal_id}}", "activate"]
						},
						"description": "Activa una terminal."
					},
					"response": []
				},
				{
					"name": "Deactivate Terminal",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/terminals/{{terminal_id}}/deactivate",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "terminals", "{{terminal_id}}", "deactivate"]
						},
						"description": "Desactiva una terminal. El historial de CAI se preserva."
					},
					"response": []
				}
			],
			"description": "Endpoints de gestión de terminales. Requieren autenticación."
		},
		{
			"name": "CAI Management",
			"item": [
				{
					"name": "Assign CAI",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"cai_number\": \"ABC123-DEF456-GHI789\",\n    \"range_start\": 1,\n    \"range_end\": 1000,\n    \"expiration_date\": \"2026-12-31\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/terminals/{{terminal_id}}/cai",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "terminals", "{{terminal_id}}", "cai"]
						},
						"description": "Asigna un rango CAI a una terminal. Requiere rol super_admin.\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| cai_number | string | Sí | Número de CAI |\n| range_start | number | Sí | Inicio del rango de facturas |\n| range_end | number | Sí | Fin del rango de facturas |\n| expiration_date | string | Sí | Fecha de expiración (YYYY-MM-DD) |"
					},
					"response": []
				},
				{
					"name": "Get CAI Status",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/terminals/{{terminal_id}}/cai/status",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "terminals", "{{terminal_id}}", "cai", "status"]
						},
						"description": "Obtiene el estado actual del CAI de una terminal.\n\nIncluye advertencia si el CAI expira en los próximos 30 días."
					},
					"response": []
				},
				{
					"name": "Get Next Invoice Number",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/terminals/{{terminal_id}}/cai/next-number",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "terminals", "{{terminal_id}}", "cai", "next-number"]
						},
						"description": "Obtiene el siguiente número de factura de forma atómica.\n\nEsta operación incrementa el contador y retorna el número actual.\n\n## Errores posibles\n- Terminal inactiva\n- Sin CAI asignado\n- CAI expirado\n- Rango agotado"
					},
					"response": []
				},
				{
					"name": "Get CAI History",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/terminals/{{terminal_id}}/cai/history",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "terminals", "{{terminal_id}}", "cai", "history"]
						},
						"description": "Obtiene el historial completo de CAI de una terminal, ordenado por fecha de creación."
					},
					"response": []
				}
			],
			"description": "Endpoints de gestión de CAI (Código de Autorización de Impresión). Requieren autenticación."
		},
		{
			"name": "Products",
			"item": [
				{
					"name": "Create Product",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('product_id', jsonData.id);",
									"    pm.test('Product created successfully', function() {",
									"        pm.expect(jsonData.id).to.not.be.empty;",
									"        pm.expect(jsonData.sku).to.not.be.empty;",
									"        pm.expect(jsonData.name).to.not.be.empty;",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Producto de Prueba\",\n    \"unit_of_measure\": \"unit\",\n    \"base_price\": 99.99,\n    \"cost_price\": 50.00,\n    \"barcode\": \"7501234567890\",\n    \"description\": \"Descripción del producto\",\n    \"is_trackable\": true,\n    \"has_variants\": false,\n    \"tax_rate\": 0.15,\n    \"tax_included\": false\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/products",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "products"]
						},
						"description": "Crea un nuevo producto. Requiere permiso products:create.\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| name | string | Sí | Nombre del producto |\n| unit_of_measure | string | Sí | Unidad: unit, kg, lb, liter, oz |\n| base_price | decimal | No | Precio de venta |\n| cost_price | decimal | No | Precio de costo |\n| barcode | string | No | Código de barras único |\n| description | string | No | Descripción |\n| category_id | uuid | No | ID de categoría |\n| is_trackable | boolean | No | Si se rastrea inventario (default: true) |\n| has_variants | boolean | No | Si tiene variantes (default: false) |\n| tax_rate | decimal | No | Tasa de impuesto |\n| tax_included | boolean | No | Si el precio incluye impuesto |"
					},
					"response": []
				},
				{
					"name": "List Products",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/products?page=1&page_size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "products"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "20"
								},
								{
									"key": "category_id",
									"value": "",
									"disabled": true
								},
								{
									"key": "is_active",
									"value": "true",
									"disabled": true
								},
								{
									"key": "search",
									"value": "",
									"disabled": true
								}
							]
						},
						"description": "Lista productos con paginación y filtros opcionales.\n\n## Query Parameters\n\n| Parámetro | Tipo | Descripción |\n|-----------|------|-------------|\n| page | number | Número de página (default: 1) |\n| page_size | number | Items por página (default: 20, max: 100) |\n| category_id | uuid | Filtrar por categoría |\n| is_active | boolean | Filtrar por estado activo |\n| search | string | Buscar en nombre/descripción |"
					},
					"response": []
				},
				{
					"name": "Get Product",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/products/{{product_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "products", "{{product_id}}"]
						},
						"description": "Obtiene el detalle de un producto incluyendo sus variantes."
					},
					"response": []
				},
				{
					"name": "Update Product",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Producto Actualizado\",\n    \"base_price\": 149.99,\n    \"is_active\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/products/{{product_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "products", "{{product_id}}"]
						},
						"description": "Actualiza los datos de un producto. Requiere permiso products:update. Todos los campos son opcionales."
					},
					"response": []
				},
				{
					"name": "Delete Product",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/products/{{product_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "products", "{{product_id}}"]
						},
						"description": "Elimina un producto (soft delete). Requiere permiso products:delete."
					},
					"response": []
				},
				{
					"name": "Create Variant",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('variant_id', jsonData.id);",
									"    pm.test('Variant created successfully', function() {",
									"        pm.expect(jsonData.id).to.not.be.empty;",
									"        pm.expect(jsonData.sku).to.not.be.empty;",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Rojo - Grande\",\n    \"variant_attributes\": {\n        \"color\": \"rojo\",\n        \"size\": \"L\"\n    },\n    \"price\": 109.99,\n    \"cost_price\": 55.00,\n    \"barcode\": \"7501234567891\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/products/{{product_id}}/variants",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "products", "{{product_id}}", "variants"]
						},
						"description": "Crea una variante para un producto. Requiere permiso products:create.\n\nNota: El producto debe tener has_variants=true.\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| name | string | Sí | Nombre de la variante |\n| variant_attributes | object | Sí | Atributos específicos (color, size, etc.) |\n| price | decimal | No | Precio override |\n| cost_price | decimal | No | Costo override |\n| barcode | string | No | Código de barras único |"
					},
					"response": []
				},
				{
					"name": "List Variants",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/products/{{product_id}}/variants",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "products", "{{product_id}}", "variants"]
						},
						"description": "Lista todas las variantes de un producto."
					},
					"response": []
				},
				{
					"name": "Get Variant",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/products/{{product_id}}/variants/{{variant_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "products", "{{product_id}}", "variants", "{{variant_id}}"]
						},
						"description": "Obtiene el detalle de una variante específica."
					},
					"response": []
				},
				{
					"name": "Update Variant",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Azul - Mediano\",\n    \"variant_attributes\": {\n        \"color\": \"azul\",\n        \"size\": \"M\"\n    },\n    \"price\": 119.99,\n    \"is_active\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/products/{{product_id}}/variants/{{variant_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "products", "{{product_id}}", "variants", "{{variant_id}}"]
						},
						"description": "Actualiza los datos de una variante. Requiere permiso products:update."
					},
					"response": []
				},
				{
					"name": "Delete Variant",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/products/{{product_id}}/variants/{{variant_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "products", "{{product_id}}", "variants", "{{variant_id}}"]
						},
						"description": "Elimina una variante (soft delete). Requiere permiso products:delete."
					},
					"response": []
				},
				{
					"name": "Get Product Recipe",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/products/{{product_id}}/recipe",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "products", "{{product_id}}", "recipe"]
						},
						"description": "Obtiene la receta activa de un producto con todos sus ingredientes y sustitutos."
					},
					"response": []
				},
				{
					"name": "Get Product Stock",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/products/{{product_id}}/stock",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "products", "{{product_id}}", "stock"]
						},
						"description": "Obtiene los niveles de stock del producto en todas las tiendas. Requiere permiso inventory:read."
					},
					"response": []
				}
			],
			"description": "Endpoints de gestión de productos y variantes. Requieren autenticación."
		},
		{
			"name": "Recipes",
			"item": [
				{
					"name": "Create Recipe",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('recipe_id', jsonData.id);",
									"    pm.test('Recipe created successfully', function() {",
									"        pm.expect(jsonData.id).to.not.be.empty;",
									"        pm.expect(jsonData.name).to.not.be.empty;",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"product_id\": \"{{product_id}}\",\n    \"name\": \"Receta de Prueba\",\n    \"description\": \"Descripción de la receta\",\n    \"yield_quantity\": 10,\n    \"preparation_time_minutes\": 30,\n    \"calculate_cost_from_ingredients\": true,\n    \"ingredients\": [\n        {\n            \"ingredient_product_id\": \"uuid-del-ingrediente\",\n            \"quantity\": 2,\n            \"unit_of_measure\": \"kg\",\n            \"is_optional\": false,\n            \"can_substitute\": true,\n            \"sort_order\": 1,\n            \"preparation_step\": \"Picar finamente\",\n            \"substitutes\": []\n        }\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/recipes",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "recipes"]
						},
						"description": "Crea una nueva receta con ingredientes. Requiere permiso recipes:create.\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| product_id | uuid | Sí* | ID del producto que produce esta receta |\n| variant_id | uuid | Sí* | O ID de la variante (excluyente con product_id) |\n| name | string | Sí | Nombre de la receta |\n| yield_quantity | decimal | Sí | Cantidad producida |\n| ingredients | array | Sí | Lista de ingredientes |\n\n*Debe especificar product_id O variant_id, no ambos."
					},
					"response": []
				},
				{
					"name": "List Recipes",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/recipes?page=1&page_size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "recipes"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "20"
								},
								{
									"key": "is_active",
									"value": "true",
									"disabled": true
								},
								{
									"key": "search",
									"value": "",
									"disabled": true
								}
							]
						},
						"description": "Lista recetas con paginación y filtros opcionales.\n\n## Query Parameters\n\n| Parámetro | Tipo | Descripción |\n|-----------|------|-------------|\n| page | number | Número de página (default: 1) |\n| page_size | number | Items por página (default: 20, max: 100) |\n| is_active | boolean | Filtrar por estado activo |\n| search | string | Buscar en nombre/descripción |"
					},
					"response": []
				},
				{
					"name": "Get Recipe",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/recipes/{{recipe_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "recipes", "{{recipe_id}}"]
						},
						"description": "Obtiene el detalle de una receta con todos sus ingredientes y sustitutos."
					},
					"response": []
				},
				{
					"name": "Update Recipe",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Receta Actualizada\",\n    \"yield_quantity\": 15,\n    \"preparation_time_minutes\": 45,\n    \"is_active\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/recipes/{{recipe_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "recipes", "{{recipe_id}}"]
						},
						"description": "Actualiza los datos de una receta. Requiere permiso recipes:update. Todos los campos son opcionales."
					},
					"response": []
				},
				{
					"name": "Calculate Recipe Cost",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/recipes/{{recipe_id}}/calculate-cost",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "recipes", "{{recipe_id}}", "calculate-cost"]
						},
						"description": "Calcula el costo de una receta basado en los costos actuales de los ingredientes.\n\n## Response\n\n| Campo | Tipo | Descripción |\n|-------|------|-------------|\n| recipe_id | uuid | ID de la receta |\n| total_ingredient_cost | decimal | Costo total de ingredientes |\n| cost_per_unit | decimal | Costo por unidad producida |\n| yield_quantity | decimal | Cantidad producida |\n| ingredient_count | number | Número total de ingredientes |\n| ingredients_with_cost | number | Ingredientes con costo definido |"
					},
					"response": []
				}
			],
			"description": "Endpoints de gestión de recetas (Bill of Materials). Requieren autenticación."
		},
		{
			"name": "Inventory",
			"item": [
				{
					"name": "List Stock",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/stock?page=1&page_size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "stock"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "20"
								},
								{
									"key": "store_id",
									"value": "{{store_id}}",
									"disabled": true
								},
								{
									"key": "product_id",
									"value": "{{product_id}}",
									"disabled": true
								},
								{
									"key": "low_stock",
									"value": "false",
									"disabled": true
								}
							]
						},
						"description": "Lista registros de stock con paginación y filtros. Requiere permiso inventory:read.\n\n## Query Parameters\n\n| Parámetro | Tipo | Descripción |\n|-----------|------|-------------|\n| page | number | Número de página (default: 1) |\n| page_size | number | Items por página (default: 20, max: 100) |\n| store_id | uuid | Filtrar por tienda |\n| product_id | uuid | Filtrar por producto |\n| low_stock | boolean | Solo mostrar items con stock bajo |"
					},
					"response": []
				},
				{
					"name": "Get Stock",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('stock_id', jsonData.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/stock/{{stock_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "stock", "{{stock_id}}"]
						},
						"description": "Obtiene el detalle de un registro de stock con información del producto/variante. Requiere permiso inventory:read."
					},
					"response": []
				},
				{
					"name": "Initialize Stock",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('stock_id', jsonData.id);",
									"    pm.test('Stock initialized successfully', function() {",
									"        pm.expect(jsonData.id).to.not.be.empty;",
									"        pm.expect(jsonData.store_id).to.not.be.empty;",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"store_id\": \"{{store_id}}\",\n    \"product_id\": \"{{product_id}}\",\n    \"initial_quantity\": 100,\n    \"min_stock_level\": 10,\n    \"max_stock_level\": 500\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/stock",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "stock"]
						},
						"description": "Inicializa el stock de un producto o variante en una tienda específica. Requiere permiso inventory:write.\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| store_id | uuid | Sí | ID de la tienda |\n| product_id | uuid | Sí* | ID del producto (excluyente con variant_id) |\n| variant_id | uuid | Sí* | ID de la variante (excluyente con product_id) |\n| initial_quantity | decimal | No | Cantidad inicial (default: 0) |\n| min_stock_level | decimal | No | Nivel mínimo para alertas (default: 0) |\n| max_stock_level | decimal | No | Nivel máximo de stock |\n\n*Debe especificar product_id O variant_id, no ambos.\n\n## Respuestas\n\n- **201 Created**: Stock inicializado exitosamente\n- **400 Bad Request**: Error de validación\n- **404 Not Found**: Producto/variante no existe\n- **409 Conflict**: Stock ya existe para esta combinación tienda/producto"
					},
					"response": []
				},
				{
					"name": "Bulk Initialize Stock",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"store_id\": \"{{store_id}}\",\n    \"items\": [\n        {\n            \"product_id\": \"{{product_id}}\",\n            \"initial_quantity\": 50,\n            \"min_stock_level\": 10,\n            \"max_stock_level\": 200\n        },\n        {\n            \"variant_id\": \"{{variant_id}}\",\n            \"initial_quantity\": 25,\n            \"min_stock_level\": 5\n        }\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/stock/bulk",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "stock", "bulk"]
						},
						"description": "Inicializa stock para múltiples productos/variantes a la vez. Útil para configuración inicial de tienda o importaciones masivas. Requiere permiso inventory:write.\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| store_id | uuid | Sí | ID de la tienda |\n| items | array | Sí | Lista de productos a inicializar |\n\n## Item Fields\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| product_id | uuid | Sí* | ID del producto (excluyente con variant_id) |\n| variant_id | uuid | Sí* | ID de la variante (excluyente con product_id) |\n| initial_quantity | decimal | No | Cantidad inicial (default: 0) |\n| min_stock_level | decimal | No | Nivel mínimo para alertas (default: 0) |\n| max_stock_level | decimal | No | Nivel máximo de stock |\n\n## Response\n\n| Campo | Tipo | Descripción |\n|-------|------|-------------|\n| successful | array | Items inicializados exitosamente |\n| failed | array | Items que fallaron con mensaje de error |"
					},
					"response": []
				},
				{
					"name": "Update Stock Levels",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"stock_id\": \"{{stock_id}}\",\n    \"min_stock_level\": 20,\n    \"max_stock_level\": 500,\n    \"expected_version\": 1\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/stock/{{stock_id}}/levels",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "stock", "{{stock_id}}", "levels"]
						},
						"description": "Actualiza los niveles de stock mínimo/máximo para un registro de stock. No modifica la cantidad actual. Requiere permiso inventory:write.\n\n## Path Parameters\n\n- `stock_id`: UUID del registro de stock\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| stock_id | uuid | Sí | ID del registro de stock |\n| min_stock_level | decimal | Sí | Nivel mínimo para alertas |\n| max_stock_level | decimal | No | Nivel máximo de stock |\n| expected_version | number | Sí | Versión esperada (optimistic locking) |\n\n## Respuestas\n\n- **200 OK**: Niveles actualizados exitosamente\n- **404 Not Found**: Registro de stock no existe\n- **409 Conflict**: Conflicto de versión (optimistic locking)"
					},
					"response": []
				},
				{
					"name": "Create Reservation",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('reservation_id', jsonData.id);",
									"    pm.test('Reservation created successfully', function() {",
									"        pm.expect(jsonData.id).to.not.be.empty;",
									"        pm.expect(jsonData.status).to.equal('pending');",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"stock_id\": \"{{stock_id}}\",\n    \"reference_type\": \"cart\",\n    \"reference_id\": \"00000000-0000-0000-0000-000000000001\",\n    \"quantity\": 5,\n    \"expires_at\": \"2026-12-31T23:59:59Z\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/reservations",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "reservations"]
						},
						"description": "Crea una reserva de inventario. Requiere permiso cart:add o sales:create.\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| stock_id | uuid | Sí | ID del registro de stock |\n| reference_type | string | Sí | Tipo: cart, order, quote |\n| reference_id | uuid | Sí | ID de referencia (carrito, orden, etc.) |\n| quantity | decimal | Sí | Cantidad a reservar |\n| expires_at | datetime | Sí | Fecha de expiración (ISO 8601) |"
					},
					"response": []
				},
				{
					"name": "List Reservations",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/reservations?page=1&page_size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "reservations"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "20"
								},
								{
									"key": "stock_id",
									"value": "{{stock_id}}",
									"disabled": true
								},
								{
									"key": "status",
									"value": "pending",
									"disabled": true
								},
								{
									"key": "reference_type",
									"value": "cart",
									"disabled": true
								}
							]
						},
						"description": "Lista reservas con paginación y filtros. Requiere permiso inventory:read.\n\n## Query Parameters\n\n| Parámetro | Tipo | Descripción |\n|-----------|------|-------------|\n| page | number | Número de página (default: 1) |\n| page_size | number | Items por página (default: 20, max: 100) |\n| stock_id | uuid | Filtrar por registro de stock |\n| status | string | Filtrar por estado: pending, confirmed, cancelled, expired |\n| reference_type | string | Filtrar por tipo: cart, order, quote |"
					},
					"response": []
				},
				{
					"name": "Confirm Reservation",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/reservations/{{reservation_id}}/confirm",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "reservations", "{{reservation_id}}", "confirm"]
						},
						"description": "Confirma una reserva pendiente y decrementa el stock. Requiere permiso sales:create.\n\nLa reserva debe estar en estado 'pending'."
					},
					"response": []
				},
				{
					"name": "Cancel Reservation",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/reservations/{{reservation_id}}/cancel",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "reservations", "{{reservation_id}}", "cancel"]
						},
						"description": "Cancela una reserva pendiente y libera el stock reservado. Requiere permiso cart:remove o sales:void.\n\nLa reserva debe estar en estado 'pending'."
					},
					"response": []
				},
				{
					"name": "Expire Reservations",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/reservations/expire",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "reservations", "expire"]
						},
						"description": "Proceso batch para expirar todas las reservas pendientes que han pasado su fecha de expiración. Requiere permiso system:admin.\n\nTípicamente llamado por un job programado.\n\n## Response\n\n| Campo | Tipo | Descripción |\n|-------|------|-------------|\n| expired_count | number | Reservas expiradas exitosamente |\n| failed_count | number | Reservas que fallaron al expirar |\n| expired_reservations | array | Detalles de reservas expiradas |\n| errors | array | Errores encontrados |"
					},
					"response": []
				},
				{
					"name": "Create Adjustment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('adjustment_id', jsonData.id);",
									"    pm.test('Adjustment created successfully', function() {",
									"        pm.expect(jsonData.id).to.not.be.empty;",
									"        pm.expect(jsonData.status).to.equal('draft');",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"store_id\": \"{{store_id}}\",\n    \"adjustment_type\": \"decrease\",\n    \"adjustment_reason\": \"damage\",\n    \"notes\": \"Productos dañados durante el almacenamiento\",\n    \"items\": [\n        {\n            \"stock_id\": \"{{stock_id}}\",\n            \"quantity\": 5,\n            \"unit_cost\": 10.00,\n            \"notes\": \"Caja dañada por humedad\"\n        }\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/adjustments",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "adjustments"]
						},
						"description": "Crea un nuevo ajuste de stock en estado borrador. Requiere permiso inventory:adjustments:create.\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| store_id | uuid | Sí | ID de la tienda |\n| adjustment_type | string | Sí | increase o decrease |\n| adjustment_reason | string | Sí | damage, theft, loss, found, correction, expiration |\n| notes | string | No | Notas generales del ajuste |\n| items | array | Sí | Lista de items a ajustar |\n\n## Item Fields\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| stock_id | uuid | Sí | ID del registro de stock |\n| quantity | decimal | Sí | Cantidad a ajustar |\n| unit_cost | decimal | No | Costo unitario |\n| notes | string | No | Notas del item |"
					},
					"response": []
				},
				{
					"name": "List Adjustments",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/adjustments?page=1&page_size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "adjustments"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "20"
								},
								{
									"key": "store_id",
									"value": "{{store_id}}",
									"disabled": true
								},
								{
									"key": "status",
									"value": "draft",
									"disabled": true
								}
							]
						},
						"description": "Lista ajustes de stock con paginación y filtros. Requiere permiso inventory:adjustments:read.\n\n## Query Parameters\n\n| Parámetro | Tipo | Descripción |\n|-----------|------|-------------|\n| page | number | Número de página (default: 1) |\n| page_size | number | Items por página (default: 20, max: 100) |\n| store_id | uuid | Filtrar por tienda |\n| status | string | Filtrar por estado: draft, pending_approval, approved, rejected, applied |"
					},
					"response": []
				},
				{
					"name": "Get Adjustment",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/adjustments/{{adjustment_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "adjustments", "{{adjustment_id}}"]
						},
						"description": "Obtiene el detalle de un ajuste incluyendo todos sus items. Requiere permiso inventory:adjustments:read."
					},
					"response": []
				},
				{
					"name": "Submit Adjustment",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/adjustments/{{adjustment_id}}/submit",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "adjustments", "{{adjustment_id}}", "submit"]
						},
						"description": "Envía un ajuste en borrador para aprobación. Requiere permiso inventory:adjustments:submit.\n\nEl ajuste debe:\n- Estar en estado 'draft'\n- Tener al menos un item"
					},
					"response": []
				},
				{
					"name": "Approve Adjustment",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"notes\": \"Aprobado - verificado físicamente\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/adjustments/{{adjustment_id}}/approve",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "adjustments", "{{adjustment_id}}", "approve"]
						},
						"description": "Aprueba un ajuste pendiente de aprobación. Requiere permiso inventory:adjustments:approve.\n\nEl ajuste debe estar en estado 'pending_approval'.\n\n## Request Body (opcional)\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| notes | string | No | Notas del aprobador |"
					},
					"response": []
				},
				{
					"name": "Reject Adjustment",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"notes\": \"Rechazado - cantidades incorrectas, favor revisar\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/adjustments/{{adjustment_id}}/reject",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "adjustments", "{{adjustment_id}}", "reject"]
						},
						"description": "Rechaza un ajuste pendiente de aprobación. Requiere permiso inventory:adjustments:approve.\n\nEl ajuste debe estar en estado 'pending_approval'.\n\n## Request Body (opcional)\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| notes | string | No | Motivo del rechazo |"
					},
					"response": []
				},
				{
					"name": "Apply Adjustment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/inventory/adjustments/{{adjustment_id}}/apply",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "inventory", "adjustments", "{{adjustment_id}}", "apply"]
						},
						"description": "Aplica un ajuste aprobado al inventario, actualizando los niveles de stock. Requiere permiso inventory:adjustments:apply.\n\nEl ajuste debe estar en estado 'approved'.\n\nEsta operación:\n1. Actualiza las cantidades de stock para cada item\n2. Registra los movimientos de inventario (Kardex)\n3. Cambia el estado del ajuste a 'applied'\n4. Registra los balances antes/después en cada item"
					},
					"response": []
				}
			],
			"description": "Endpoints de gestión de inventario (stock, reservas y ajustes). Requieren autenticación."
		},
		{
			"name": "Vendors",
			"item": [
				{
					"name": "Create Vendor",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('vendor_id', jsonData.id);",
									"    pm.test('Vendor created successfully', function() {",
									"        pm.expect(jsonData.id).to.not.be.empty;",
									"        pm.expect(jsonData.code).to.not.be.empty;",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"code\": \"VENDOR001\",\n    \"name\": \"Proveedor Principal\",\n    \"legal_name\": \"Proveedor Principal S.A. de C.V.\",\n    \"tax_id\": \"RTN-12345678901234\",\n    \"email\": \"contacto@proveedor.com\",\n    \"phone\": \"+504 2234-5678\",\n    \"address\": \"Av. Principal #123, Tegucigalpa\",\n    \"payment_terms_days\": 30,\n    \"currency\": \"HNL\",\n    \"notes\": \"Proveedor de productos varios\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/vendors",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "vendors"]
						},
						"description": "Crea un nuevo proveedor. Requiere permiso vendors:create.\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| code | string | Sí | Código único del proveedor |\n| name | string | Sí | Nombre comercial |\n| legal_name | string | No | Razón social |\n| tax_id | string | No | RTN o identificación fiscal |\n| email | string | No | Email de contacto |\n| phone | string | No | Teléfono de contacto |\n| address | string | No | Dirección |\n| payment_terms_days | number | No | Días de crédito (default: 0) |\n| currency | string | No | Moneda (default: HNL) |\n| notes | string | No | Notas adicionales |"
					},
					"response": []
				},
				{
					"name": "List Vendors",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/vendors?page=1&page_size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "vendors"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "20"
								},
								{
									"key": "is_active",
									"value": "true",
									"disabled": true
								},
								{
									"key": "search",
									"value": "",
									"disabled": true
								}
							]
						},
						"description": "Lista proveedores con paginación y filtros. Requiere permiso vendors:read.\n\n## Query Parameters\n\n| Parámetro | Tipo | Descripción |\n|-----------|------|-------------|\n| page | number | Número de página (default: 1) |\n| page_size | number | Items por página (default: 20, max: 100) |\n| is_active | boolean | Filtrar por estado activo |\n| search | string | Buscar por nombre o código |"
					},
					"response": []
				},
				{
					"name": "Get Vendor",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/vendors/{{vendor_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "vendors", "{{vendor_id}}"]
						},
						"description": "Obtiene el detalle de un proveedor. Requiere permiso vendors:read."
					},
					"response": []
				},
				{
					"name": "Update Vendor",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Proveedor Actualizado\",\n    \"email\": \"nuevo@proveedor.com\",\n    \"payment_terms_days\": 45\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/vendors/{{vendor_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "vendors", "{{vendor_id}}"]
						},
						"description": "Actualiza los datos de un proveedor. Requiere permiso vendors:update. Todos los campos son opcionales."
					},
					"response": []
				},
				{
					"name": "Activate Vendor",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/vendors/{{vendor_id}}/activate",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "vendors", "{{vendor_id}}", "activate"]
						},
						"description": "Activa un proveedor desactivado. Requiere permiso vendors:update."
					},
					"response": []
				},
				{
					"name": "Deactivate Vendor",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/vendors/{{vendor_id}}/deactivate",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "vendors", "{{vendor_id}}", "deactivate"]
						},
						"description": "Desactiva un proveedor. Requiere permiso vendors:update.\n\nNo se puede desactivar si tiene órdenes de compra pendientes."
					},
					"response": []
				}
			],
			"description": "Endpoints de gestión de proveedores. Requieren autenticación."
		},
		{
			"name": "Purchase Orders",
			"item": [
				{
					"name": "Create Purchase Order",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('purchase_order_id', jsonData.id);",
									"    pm.test('Purchase order created successfully', function() {",
									"        pm.expect(jsonData.id).to.not.be.empty;",
									"        pm.expect(jsonData.order_number).to.not.be.empty;",
									"        pm.expect(jsonData.status).to.equal('draft');",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"store_id\": \"{{store_id}}\",\n    \"vendor_id\": \"{{vendor_id}}\",\n    \"order_date\": \"2026-01-28\",\n    \"expected_delivery_date\": \"2026-02-04\",\n    \"currency\": \"HNL\",\n    \"payment_terms_days\": 30,\n    \"notes\": \"Orden de compra de prueba\",\n    \"items\": [\n        {\n            \"product_id\": \"{{product_id}}\",\n            \"quantity\": 100,\n            \"unit_cost\": 50.00,\n            \"tax_rate\": 0.15,\n            \"discount_percent\": 0,\n            \"notes\": \"Primera línea de la orden\"\n        }\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/purchase-orders",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "purchase-orders"]
						},
						"description": "Crea una nueva orden de compra en estado borrador. Requiere permiso purchase_orders:create.\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| store_id | uuid | Sí | ID de la tienda destino |\n| vendor_id | uuid | Sí | ID del proveedor |\n| order_date | date | Sí | Fecha de la orden (YYYY-MM-DD) |\n| expected_delivery_date | date | No | Fecha esperada de entrega |\n| currency | string | No | Moneda (default: HNL) |\n| payment_terms_days | number | No | Días de crédito |\n| notes | string | No | Notas de la orden |\n| items | array | Sí | Lista de items |\n\n## Item Fields\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| product_id | uuid | Sí* | ID del producto |\n| variant_id | uuid | Sí* | ID de la variante (excluyente) |\n| quantity | decimal | Sí | Cantidad a ordenar |\n| unit_cost | decimal | Sí | Costo unitario |\n| tax_rate | decimal | No | Tasa de impuesto |\n| discount_percent | decimal | No | Porcentaje de descuento |\n| notes | string | No | Notas del item |"
					},
					"response": []
				},
				{
					"name": "List Purchase Orders",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/purchase-orders?page=1&page_size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "purchase-orders"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "20"
								},
								{
									"key": "store_id",
									"value": "{{store_id}}",
									"disabled": true
								},
								{
									"key": "vendor_id",
									"value": "{{vendor_id}}",
									"disabled": true
								},
								{
									"key": "status",
									"value": "draft",
									"disabled": true
								},
								{
									"key": "search",
									"value": "",
									"disabled": true
								}
							]
						},
						"description": "Lista órdenes de compra con paginación y filtros. Requiere permiso purchase_orders:read.\n\n## Query Parameters\n\n| Parámetro | Tipo | Descripción |\n|-----------|------|-------------|\n| page | number | Número de página (default: 1) |\n| page_size | number | Items por página (default: 20, max: 100) |\n| store_id | uuid | Filtrar por tienda |\n| vendor_id | uuid | Filtrar por proveedor |\n| status | string | Filtrar por estado: draft, submitted, approved, partially_received, received, closed, cancelled |\n| search | string | Buscar por número de orden |"
					},
					"response": []
				},
				{
					"name": "Get Purchase Order",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/purchase-orders/{{purchase_order_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "purchase-orders", "{{purchase_order_id}}"]
						},
						"description": "Obtiene el detalle de una orden de compra incluyendo todos sus items. Requiere permiso purchase_orders:read."
					},
					"response": []
				},
				{
					"name": "Submit Purchase Order",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/purchase-orders/{{purchase_order_id}}/submit",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "purchase-orders", "{{purchase_order_id}}", "submit"]
						},
						"description": "Envía una orden de compra en borrador para aprobación. Requiere permiso purchase_orders:submit.\n\nLa orden debe:\n- Estar en estado 'draft'\n- Tener al menos un item"
					},
					"response": []
				},
				{
					"name": "Approve Purchase Order",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/purchase-orders/{{purchase_order_id}}/approve",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "purchase-orders", "{{purchase_order_id}}", "approve"]
						},
						"description": "Aprueba una orden de compra pendiente. Requiere permiso purchase_orders:approve.\n\nLa orden debe estar en estado 'submitted'."
					},
					"response": []
				},
				{
					"name": "Reject Purchase Order",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"reason\": \"Precios no acordados con el proveedor\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/purchase-orders/{{purchase_order_id}}/reject",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "purchase-orders", "{{purchase_order_id}}", "reject"]
						},
						"description": "Rechaza una orden de compra pendiente. Requiere permiso purchase_orders:approve.\n\nLa orden debe estar en estado 'submitted'.\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| reason | string | Sí | Motivo del rechazo |"
					},
					"response": []
				},
				{
					"name": "Cancel Purchase Order",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"reason\": \"Proveedor no puede entregar a tiempo\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/purchase-orders/{{purchase_order_id}}/cancel",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "purchase-orders", "{{purchase_order_id}}", "cancel"]
						},
						"description": "Cancela una orden de compra. Requiere permiso purchase_orders:cancel.\n\nSolo se pueden cancelar órdenes en estado: draft, submitted, approved.\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| reason | string | Sí | Motivo de la cancelación |"
					},
					"response": []
				},
				{
					"name": "Close Purchase Order",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/purchase-orders/{{purchase_order_id}}/close",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "purchase-orders", "{{purchase_order_id}}", "close"]
						},
						"description": "Cierra manualmente una orden de compra. Requiere permiso purchase_orders:close.\n\nLa orden debe estar en estado 'approved', 'partially_received' o 'received'.\n\nÚtil cuando no se esperan más recepciones o hay items que no se van a recibir."
					},
					"response": []
				}
			],
			"description": "Endpoints de gestión de órdenes de compra. Requieren autenticación."
		},
		{
			"name": "Goods Receipts",
			"item": [
				{
					"name": "Create Goods Receipt",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('goods_receipt_id', jsonData.id);",
									"    pm.test('Goods receipt created successfully', function() {",
									"        pm.expect(jsonData.id).to.not.be.empty;",
									"        pm.expect(jsonData.receipt_number).to.not.be.empty;",
									"        pm.expect(jsonData.status).to.equal('draft');",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"purchase_order_id\": \"{{purchase_order_id}}\",\n    \"store_id\": \"{{store_id}}\",\n    \"receipt_date\": \"2026-02-04\",\n    \"notes\": \"Recepción parcial de mercancía\",\n    \"items\": [\n        {\n            \"purchase_order_item_id\": \"uuid-del-item-de-orden\",\n            \"product_id\": \"{{product_id}}\",\n            \"quantity_received\": 50,\n            \"unit_cost\": 50.00,\n            \"lot_number\": \"LOT-2026-001\",\n            \"expiry_date\": \"2027-02-04\",\n            \"notes\": \"Producto en buen estado\"\n        }\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/goods-receipts",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "goods-receipts"]
						},
						"description": "Crea una nueva recepción de mercancía para una orden de compra. Requiere permiso goods_receipts:create.\n\n## Request Body\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| purchase_order_id | uuid | Sí | ID de la orden de compra |\n| store_id | uuid | Sí | ID de la tienda donde se recibe |\n| receipt_date | date | Sí | Fecha de recepción (YYYY-MM-DD) |\n| notes | string | No | Notas de la recepción |\n| items | array | Sí | Lista de items recibidos |\n\n## Item Fields\n\n| Campo | Tipo | Requerido | Descripción |\n|-------|------|-----------|-------------|\n| purchase_order_item_id | uuid | No | ID del item de la orden |\n| product_id | uuid | Sí* | ID del producto |\n| variant_id | uuid | Sí* | ID de la variante (excluyente) |\n| quantity_received | decimal | Sí | Cantidad recibida |\n| unit_cost | decimal | Sí | Costo unitario |\n| lot_number | string | No | Número de lote |\n| expiry_date | date | No | Fecha de vencimiento |\n| notes | string | No | Notas del item |"
					},
					"response": []
				},
				{
					"name": "List Goods Receipts",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/goods-receipts?page=1&page_size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "goods-receipts"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "20"
								},
								{
									"key": "store_id",
									"value": "{{store_id}}",
									"disabled": true
								},
								{
									"key": "purchase_order_id",
									"value": "{{purchase_order_id}}",
									"disabled": true
								},
								{
									"key": "status",
									"value": "draft",
									"disabled": true
								}
							]
						},
						"description": "Lista recepciones de mercancía con paginación y filtros. Requiere permiso goods_receipts:read.\n\n## Query Parameters\n\n| Parámetro | Tipo | Descripción |\n|-----------|------|-------------|\n| page | number | Número de página (default: 1) |\n| page_size | number | Items por página (default: 20, max: 100) |\n| store_id | uuid | Filtrar por tienda |\n| purchase_order_id | uuid | Filtrar por orden de compra |\n| status | string | Filtrar por estado: draft, confirmed, cancelled |"
					},
					"response": []
				},
				{
					"name": "Get Goods Receipt",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/goods-receipts/{{goods_receipt_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "goods-receipts", "{{goods_receipt_id}}"]
						},
						"description": "Obtiene el detalle de una recepción de mercancía incluyendo todos sus items. Requiere permiso goods_receipts:read."
					},
					"response": []
				},
				{
					"name": "Confirm Goods Receipt",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/goods-receipts/{{goods_receipt_id}}/confirm",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "goods-receipts", "{{goods_receipt_id}}", "confirm"]
						},
						"description": "Confirma una recepción de mercancía y actualiza el inventario. Requiere permiso goods_receipts:confirm.\n\nLa recepción debe estar en estado 'draft'.\n\nEsta operación:\n1. Actualiza las cantidades de stock para cada item\n2. Registra los movimientos de inventario (Kardex)\n3. Actualiza el estado de la orden de compra\n4. Cambia el estado de la recepción a 'confirmed'"
					},
					"response": []
				},
				{
					"name": "Cancel Goods Receipt",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/goods-receipts/{{goods_receipt_id}}/cancel",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "goods-receipts", "{{goods_receipt_id}}", "cancel"]
						},
						"description": "Cancela una recepción de mercancía. Requiere permiso goods_receipts:cancel.\n\nLa recepción debe estar en estado 'draft'.\n\nNo se pueden cancelar recepciones ya confirmadas."
					},
					"response": []
				}
			],
			"description": "Endpoints de gestión de recepciones de mercancía (Goods Receipts). Requieren autenticación."
		}
	]
}